# solox5-revenge
Reverse Engineering the SOLO-X5 Bluetooth speaker.
Read our findings below.

![SOLO X5](https://github.com/theheliumlabs/solox5-revenge/blob/main/images/SOLOX5-RE-IM-01A.jpg)

## Power Delivery, Battery Management
System is powered by a 3.7V LiPo (500mAh), that charges through a micro-B USB (3-pin) connector.

The power is directly fed into LTC4056 (LTH7) that serves as BMS. The charging current determined by PROG resistor (2.7k) is around 130mA. The battery charge reference voltage is 4.2V and it is observed that the system enters undervoltage shutdown at 3.85V. Which indicates quite a lot of battery capacity is un-claimed. The red charing LED indicator is controlled by the open drain charging status pin.

The `+VBAT` is mainly powering the system except VDDIO that is generated internally by the MCU.

## Main Chip: Microcontroller
The chip markings indicate a AF021BP0F part from JL (Zhuhai Jieli Technology Co) to which there are absolutely no documentation available. The largely similar part from JL that resembles this microcontroller is AC6965E. We have verified the package pins and functionality match to that of AC6965E.

### ANNOTATED PCB
![SOLO X5](https://github.com/theheliumlabs/solox5-revenge/blob/main/images/solox5-pcb-annotated-02.jpeg)

## Audio feed points

    - BLUETOOTH
    - FM
    - SD Card
    - USB Flash Drive
    - AUX IN

The in depth explanation of connectivity of each interface is mentioned below.

### Bluetooth
The microcontroller (AC6569E) features an integrated bluetooth interface even with matched impedance antenna line `BT_RF`. The external PCB printed 2.4GHz antenna requires no additional components other than a feed line which in this case is not even matched to 50 Ohm.

The system automatically boots into Bluetooth mode with a symbolic chinese model voice "The bluetooth device is ready to pair" and the bluetooth connection appears on your Bluetooth devices with name "SOLO X5". The range and reliability of bluetooth connection is not great but it works just fine within 5 meters range.

### FM
The FM mode requires to be selected from pushbutton interface. The signal reception is absolutely useless. It barely tunes perfectly to any of the frequencies. Do not expect much from this audio feed mode.

On the engineering side, the `FMIP` pin is the antenna line right next to `BT_RF`. The FM antenna line do have a pi filter and a Through Hole a bit far away on the PCB suspected to be FM antenna extension which was not populated in this case.


## Audio Amplifier
The MIX2918A serves as audio amplifier. It originates from a chinese brand MIXXINO but the same datasheet is distributed by WELLKING Tech co as well.

Advertised specs are 4.8W, dual mode F/D amplifier capable of operating from 2.5V to 5.1V. The F/D mode is selected by a pin which is found Not Connected in this particular case so we assume LOW voltage level to select class F amplifier. The MCU feeds Amplifier from DACL line featuring a Ci and Ri as stated by the datasheet.

The speaker has a resistance of 6.1 Ohms.

### SD Card
The micro-SD Card slot features a `detect pin` which is tied to pull-up the `SD_CLK`. When no SD Card is present, the `SD_CLK` does not have it's needed pull-up for operation.

The communication interface is bound to bare minimum featuring only DAT0 line besides `SD_CLK` and `SD_CMD`. All additional interface pins are Not Connected. 
The SD Card is powered by VDDIO generated by MCU.

### USB Flash Drive
The USB-A receptacle connector is being used to play audio from USB flash drives. Surprisingly, the USB-A is powered by 
`+VBAT` which is lower than required USB standard voltage. The USB Data pins are connected directly to MCU USB interface pins.

NOTE: Unlike AUX IN, The SD Card and USB-A modes are not selected on insertion. Instead they require to be selected explicitly by cycling through modes using pushbuttons.

### AUX IN
The AUX Input connector is TRRS type with Left and Right channels bound together to the same net. The detect pin is connected to a dedicated GPIO on MCU. The AUX audio line feeds to a dedicated MCU pin through a ceramic capacitor.

Interesting: Once the device is done booting into Bluetooth Mode, inserting the AUX cable results in AUX detected and AUX mode selected but if AUX is plugged in before boot, the AUX cable remains undetected and the device stays in BT mode after boot.

## PCB design and build quality
The system features a single copper layer which is surprising for the application. The antennas definitely cannot be impedance matched this way. The PCB material is standard FR4. 
Overall this is a clever design and serves the purpose. 

The routing is done very smartly with only a few 0 Ohm jumper resistors. The microphone input is not being used at all despite the microphone being there. I believe it has to do with the firmware. The pushbuttons are chained to save 1 GPIO (3 IOs for 4 buttons).

There are test pads here and there but only a few of them. All the excess copper area is filled into neighboring nets to reduce fabrication process time. Though it is surprising they still managed to use ENIG instead of cheaper HASL finish despite all the cost cutting measures.


## How so cheap???

This is an interesting take. The huge enabler of such a low cost system is the MCU itself which is purpose built for such applications and requires minimal external components. It features a lot of functionality and can do wonders if used in a smart way.

Aside from MCU, the singlle layer PCB reduces costs in very large production batches as expected for such products.

The product casing isn't great but it does not look too cheap for the price either. The speaker audio quality as expected is not very good but I'd say 50% there for a good speaker. The vertical height of the cylinder could be reduced by upto 20mm easily. The mesh up top is metallic and decent quality.


To conclude, it is to be said, a lot of lessons learned on how to make products more cost effective but sure there are compromises in one way or the other. It would be interesting to obtain and reverse engineer the firmware and get insights of software side of things.


## Reversed schematics, datasheets

We have published the schematics, high resolution PCB images and other information yielded as a result of reverse engineering effort. 

ENJOY!!!!!!!!!
